/* empty css     */(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(e){if(e.ep)return;e.ep=!0;const s=i(e);fetch(e.href,s)}})();const a={delay:300,wait:1500,stand:1500},h=()=>userSettings===void 0?a:{...a,...userSettings};class l{constructor({delay:t,wait:i,stand:n,alternativeCode:e}){this.settings={delay:t,wait:i,stand:n,alternativeCode:e},this.h1=document.querySelector("h1"),this.titleText=this.h1.textContent===""?document.title:this.h1.textContent,this.alternativeText,this.textArray,this.sound={type:new Audio("sound/type.mp3"),return:new Audio("sound/return.mp3")},this.screen=document.createElement("div"),this.paragraph=document.createElement("p"),this.subtitle=document.createElement("p"),this._runAll()}_getSubtitleFontSize(){const{width:t,height:i}=this.screen.getBoundingClientRect(),n=Math.floor(t*.7/this.textArray.length),e=Math.ceil(this.textArray.length/10),s=Math.floor(n*e*.9);return s>i*.7?Math.floor(i*.7)+"px":s+"px"}_getInside(){return this.settings.alternativeCode?this.settings.alternativeCode:this.h1.textContent!==""?this.h1.innerHTML:document.title}_start(){const t=document.createElement("p");t.classList.add("attention"),t.innerHTML="注意：音が出ます<br><span>クリックでスタート</span>",this.screen.appendChild(t),this.screen.addEventListener("click",()=>{this.screen.removeChild(t),console.log("start"),this._runAll()})}_init(){this.alternativeText=this.settings.alternativeCode?.replaceAll("<span>","").replaceAll("</span>","").split(""),this.textArray=this.settings.alternativeCode?this.alternativeText:this.titleText.split(""),this.screen.classList.add("screen"),this.paragraph.classList.add("character"),this.subtitle.classList.add("subtitle"),this.screen.appendChild(this.paragraph),document.body.appendChild(this.screen),this.subtitle.style.fontSize=this._getSubtitleFontSize(),this.subtitle.innerHTML=this._getInside(),this.sound.type.volume=.3}_showChar(t){return new Promise(i=>{this.sound.type.currentTime=0,this.sound.type.play(),setTimeout(()=>{this.paragraph.textContent=t,i("show char")},this.settings.delay)})}async _showSingleCharacter(){for(const t of this.textArray)await this._showChar(t)}_removeParagraph(){return new Promise(t=>{setTimeout(()=>{this.screen.removeChild(this.paragraph),this.sound.return.play(),t("remove paragraph")},this.settings.delay)})}_showSubtitle(){return new Promise(t=>{setTimeout(()=>{this.screen.appendChild(this.subtitle),t("show subtitle")},this.settings.wait)})}_removeScreen(){setTimeout(()=>{document.body.removeChild(this.screen)},this.settings.delay*this.textArray.length+this.settings.stand)}async _runAll(){this._init();const t=document.createElement("p");t.classList.add("attention"),t.innerHTML="注意：音が出ます<br><span>クリックでスタート</span>",this.screen.appendChild(t),this.screen.addEventListener("click",async()=>{this.screen.removeChild(t),await this._showSingleCharacter(),await this._removeParagraph(),await this._showSubtitle(),await this._removeScreen()})}}const c=h();new l(c);
