/* empty css     */(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(e){if(e.ep)return;e.ep=!0;const s=i(e);fetch(e.href,s)}})();const a=async()=>{try{return await fetch("/typewriter.config.json").then(t=>t.json())}catch{console.log("typewriter.config.jsonをルート直下に格納してください")}},h=await a(),l={delay:300,stand:3e3,waitReturnSound:1500},c={...l,...h};class u{constructor({delay:t,stand:i,waitReturnSound:n,alternativeCode:e}){this.settings={delay:t,stand:i,waitReturnSound:n,alternativeCode:e},this.h1=document.querySelector("h1"),this.titleText=this.h1.textContent===""?document.title:this.h1.textContent,this.alternativeText=this.settings.alternativeCode?.replaceAll("<span>","").replaceAll("</span>","").split(""),this.textArray=this.settings.alternativeCode?this.alternativeText:this.titleText.split(""),this.sound={type:new Audio("sound/type.mp3"),return:new Audio("sound/return.mp3")},this.screen=document.createElement("div"),this.paragraph=document.createElement("p"),this.subtitle=document.createElement("p"),this._runAll()}_getSubtitleFontSize(){const t=Math.floor(this.width*.7/this.textArray.length);return this.textArray.length<10,t*1.7+"px"}_getInside(){return this.settings.alternativeCode?this.settings.alternativeCode:this.h1.textContent!==""?this.h1.innerHTML:document.title}_init(){this.screen.classList.add("screen"),this.paragraph.classList.add("char"),this.subtitle.classList.add("subtitle"),this.screen.appendChild(this.paragraph),document.body.appendChild(this.screen);const{height:t}=this.screen.getBoundingClientRect();this.width=this.screen.getBoundingClientRect().width,this.paragraph.style.fontSize=Math.floor(t*.6)+"px",this.subtitle.style.fontSize=this._getSubtitleFontSize(),this.subtitle.innerHTML=this._getInside(),this.sound.type.volume=.3}_showChar(t){return new Promise(i=>{setTimeout(()=>{this.paragraph.textContent=t,this.sound.type.currentTime=0,this.sound.type.play(),i("show char")},this.settings.delay)})}async _showSingleCharacter(){for(const t of this.textArray)await this._showChar(t)}_removeParagraph(){return new Promise(t=>{setTimeout(()=>{this.screen.removeChild(this.paragraph),this.sound.return.play(),t("remove paragraph")},this.settings.delay)})}_showSubtitle(){return new Promise(t=>{setTimeout(()=>{this.screen.appendChild(this.subtitle),t("show subtitle")},this.settings.waitReturnSound)})}_removeScreen(){setTimeout(()=>{document.body.removeChild(this.screen)},this.settings.delay*this.textArray.length)}async _runAll(){this._init(),await this._showSingleCharacter(),await this._removeParagraph(),await this._showSubtitle(),await this._removeScreen()}}new u(c);
